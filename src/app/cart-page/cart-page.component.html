<app-not-found [visible]="!cart || cart.items.length <= 0" notFoundMessage="Cart Page Is Empty!"
    resetLinkText="Go To Homepage"></app-not-found>

<div *ngIf="cart && cart.items.length > 0" class="container">
    <ul>
        <li *ngFor="let cartItem of cart.items">
            <div>
                <img [src]="cartItem.food.imageUrl" [alt]="cartItem.food.name" />
            </div>
            <div>
                <a routerLink="/food/{{ cartItem.food.id }}">
                    {{ cartItem.food.name }}
                </a>
            </div>

            <div>
                <select #quantitySelect (change)="changeQuantity(cartItem, quantitySelect.value)">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <div>
                {{ cartItem.price | currency }}
            </div>

            <div>
                <button class="remove-button" (click)="removeFromCart(cartItem)">
                    Remove
                </button>
            </div>
        </li>
    </ul>

    <div class="checkout">
        <div class="span">Order Summary</div>
        <div>
            <div class="foods-count">{{ cart.items.length }}</div>
            <div class="total-price">{{ cart.totalPrice | currency }}</div>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">
                Place my order
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">
                                Modal title
                            </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form #myForm="ngForm" (ngSubmit)="placeOrder(myForm)">
                                <div class="mb-2">
                                    <div id="emailHelp" class="form-text">
                                        To place your order please fill the form below
                                    </div>
                                    <label for="exampleInputEmail1" class="form-label">Name</label>
                                    <input type="text" class="form-control" ngModel name="name" #name required
                                        name="name" />
                                </div>
                                <div class="mb-2">
                                    <label for="exampleInputEmail1" class="form-label">Email address</label>
                                    <input type="text" class="form-control" ngModel #email required name="email" />
                                </div>
                                <div class="mb-2">
                                    <label for="exampleInputPassword1" class="form-label">Address</label>
                                    <input type="text" class="form-control" ngModel #address required name="address"
                                        id="exampleInputPassword1" />
                                </div>
                         
                                    <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"
                                    (click)="placedFromCart()">
                                    Place My Order
                                </button>
                    
                            </form>
                        </div>
                        <div class="modal-footer">
                            <div class="total-price">{{ cart.totalPrice | currency }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>